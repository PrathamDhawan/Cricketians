package app.cricketians.android.activitiesimport android.content.Intentimport android.os.Bundleimport android.os.Handlerimport android.os.Looperimport android.view.Viewimport android.widget.Toastimport androidx.appcompat.app.AppCompatActivityimport app.cricketians.android.Rimport com.google.firebase.auth.FirebaseAuthimport com.google.firebase.auth.FirebaseUserimport com.google.firebase.auth.ktx.authimport com.google.firebase.ktx.Firebaseimport kotlinx.android.synthetic.main.activity_registration.*class RegistrationActivity : AppCompatActivity() {    private lateinit var auth: FirebaseAuth    private var firstName: String ?= null    private var lastName: String ?= null    private var email: String ?= null    private var password: String ?=null    private var confirmPassword: String ?=null    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_registration)        auth = Firebase.auth        bt_SignUp.setOnClickListener {            innerLinear.visibility = View.GONE            progressBar.visibility = View.VISIBLE            firstName = et_firstName.text.toString()            lastName = et_lastName.text.toString()            email = et_Email.text.toString()            password = et_Password.text.toString()            confirmPassword = et_ConfirmPassword.text.toString()            val handler = Handler(Looper.getMainLooper())            handler.postDelayed({                if(isUserDetailsOkay()){                    signUp()                }                else{                    innerLinear.visibility = View.VISIBLE                    progressBar.visibility = View.GONE                    Toast.makeText(this, "All details required", Toast.LENGTH_SHORT).show()                }            },500)        }        tv_signIn.setOnClickListener {            startActivity(Intent(this, SignInActivity::class.java))            finish()        }    }    private fun isUserDetailsOkay(): Boolean {        return (!firstName.isNullOrEmpty()&&                    !lastName.isNullOrEmpty()&&                    !email.isNullOrEmpty()&&                    !password.isNullOrEmpty()&&                    !confirmPassword.isNullOrEmpty()) && (password == confirmPassword)    }    override fun onStart() {        super.onStart()        val currentUser = auth.currentUser        if(currentUser!=null)            updateUi(currentUser)    }    private fun signUp() {        auth.createUserWithEmailAndPassword(email!!, password!!)                .addOnCompleteListener(this) {                    if (it.isSuccessful) {                        val user = auth.currentUser                        updateUi(user)                    } else {                        Toast.makeText(this, "Error!!", Toast.LENGTH_SHORT).show()                    }                }    }    private fun updateUi(firebaseUser: FirebaseUser?) {        if (firebaseUser != null) {            val mainActivityIntent = Intent(this, HomeActivity::class.java)            startActivity(mainActivityIntent)            finish()        } else {            progressBar.visibility = View.GONE            innerLinear.visibility = View.VISIBLE        }    }}